/**
 * Chart.js v4.4.0
 * Simple chart library for the trading demo
 * https://www.chartjs.org/
 */

(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Chart = factory());
})(this, (function () {
    'use strict';

    // Simplified Chart.js implementation for demo purposes
    function Chart(ctx, config) {
        this.ctx = ctx;
        this.config = config;
        this.canvas = ctx.canvas;

        // Initialize chart
        this.init();
    }

    Chart.prototype.init = function() {
        this.draw();
    };

    Chart.prototype.draw = function() {
        const ctx = this.ctx;
        const config = this.config;
        const data = config.data;
        const options = config.options || {};

        // Clear canvas
        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

        if (config.type === 'line' && data.datasets && data.datasets.length > 0) {
            this.drawLineChart(ctx, data, options);
        }
    };

    Chart.prototype.drawLineChart = function(ctx, data, options) {
        const dataset = data.datasets[0];
        const points = dataset.data;
        const labels = data.labels || [];

        if (points.length === 0) return;

        // Set up styling
        ctx.strokeStyle = dataset.borderColor || '#007bff';
        ctx.lineWidth = dataset.borderWidth || 2;
        ctx.fillStyle = dataset.backgroundColor || 'rgba(0, 123, 255, 0.1)';

        // Calculate dimensions
        const width = this.canvas.width;
        const height = this.canvas.height;
        const padding = 10;

        // Find min/max values
        const minValue = Math.min(...points);
        const maxValue = Math.max(...points);
        const valueRange = maxValue - minValue || 1;

        // Draw line
        ctx.beginPath();
        points.forEach((point, index) => {
            const x = (index / (points.length - 1)) * (width - 2 * padding) + padding;
            const y = height - padding - ((point - minValue) / valueRange) * (height - 2 * padding);

            if (index === 0) {
                ctx.moveTo(x, y);
            } else {
                ctx.lineTo(x, y);
            }
        });
        ctx.stroke();

        // Fill area if enabled
        if (dataset.fill) {
            ctx.lineTo(width - padding, height - padding);
            ctx.lineTo(padding, height - padding);
            ctx.closePath();
            ctx.fill();
        }
    };

    Chart.prototype.update = function() {
        this.draw();
    };

    // Register Chart on window
    if (typeof window !== 'undefined') {
        window.Chart = Chart;
    }

    return Chart;
}));